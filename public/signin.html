<!DOCTYPE html>

<head>
    <title>Square Trainer</title>

    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header>
        <a href="index.html" id="title">Square Trainer</p>

        <a id="signin" href="#">Sign In</a>
    </header>

    <main>
            <p id="title">Sign In</p>

            <table>
                <tr>
                    <th>
                        <p>Username: </p>
                    </th>
                    <th>
                        <input id="username" type="text"><br>
                    </th>
                </tr>

                <tr>
                    <th>
                        <p>Password: </p>
                    </th>
                    <th>
                        <input id="password" type="password"><br>
                    </th>
                </tr>
            </table>

            <input type="button" onclick="handleSubmit()" value="Submit">
            <br>
            <a href="signup.html">Sign Up</a>
    </main>

    <footer>
        <p>Created by William Dann</p>

        Contact:
        <a href="https://github.com/WilliamDann/square-trainer">Github</a>
        <a href="https://discord.gg/UHMdUdCS3K">Discord</a>
    </footer>

    <script src="js/page.js"></script>
    <script>
        const usernameElem = document.querySelector('#username');
        const passwordElem = document.querySelector('#password');

        const handleToken = token => {
            document.cookie = `token=${token}; path=/`;
        }

        const handleSubmit = () => {
            const username = usernameElem.value;
            const password = passwordElem.value;

            const query = `mutation { signin(username:"${username}", password:"${password}") }`;
            sendQuery(query).then(res => {
                handleToken(res.signin);
                document.location = "index.html";
            });
        }
    </script>
</body>